{% extends 'base.html' %}
{% block title %}Question #{{ question['id'] }}{% endblock %}
{% block body %}

<h2>{{ question['title'] }}</h2>

{% if question['body'] %}
    <p>{{ question['body'] }}</p>
{% endif %}

{% if question['image_url'] %}
    <img src="{{ question['image_url'] }}" alt="Illustration"><br>
{% endif %}

<small>Submitted: {{ question['time_submitted'] }} Views: {{ question['view_count'] }} Votes: {{ question['vote_count'] }}</small><br>

<form action="/question/{{ question['id'] }}/vote-up" method="POST">
    <input type="submit" value="Vote up" />
</form>

<form action="/question/{{ question['id'] }}/vote-down" method="POST">
    <input type="submit" value="Vote down" />
</form>

<form action="/question/{{ question['id'] }}/edit">
    <input type="submit" value="Edit" />
</form>

<form action="/question/{{ question['id'] }}/delete">
    <input type="submit" value="Delete" />
</form>

{% if question['comments'] %}
    <h4>Comments:</h4>
    {% for comment in question['comments'] %}
        <p>{{ comment['body'] }}<br>
            <small>Submitted: {{ comment['time_submitted'] }}</small>
        </p>
    {% endfor %}
{% endif %}

<small><a href="/question/{{ question['id'] }}/add-comment">Add comment</a></small>

{% if answers %}
    <h3>Answers:</h3>

    {% for answer in answers %}
        <p>{{ answer['body'] }}</p>
        <small>Submitted: {{ answer['time_submitted'] }} Votes: {{ answer['vote_count'] }}</small><br>
        {% if answer['image_url'] %}
            <img src="{{ answer['image_url'] }}" alt="Illustration"><br>
        {% endif %}

        <form action="/answer/{{ answer['id'] }}/vote-up" method="POST">
            <input type="submit" value="Vote up" />
        </form>

        <form action="/answer/{{ answer['id'] }}/vote-down" method="POST">
            <input type="submit" value="Vote down" />
        </form>

        <form action="/answer/{{ answer['id'] }}/edit">
            <input type="submit" value="Edit" />
        </form>

        <form action="/answer/{{ answer['id'] }}/delete">
            <input type="submit" value="Delete" />
        </form>

        {% if answer['comments'] %}
            <h4>Comments:</h4>
            {% for comment in answer['comments'] %}
                <p>{{ comment['body'] }}<br>
                    <small>Submitted: {{ comment['time_submitted'] }}</small>
                </p>
            {% endfor %}

        {% endif %}
        <small><a href="/answer/{{ answer['id'] }}/add-comment">Add comment</a></small>

    {% endfor %}

    <h3>Add your answer:</h3>

{% else %}

    <h3>Be the first to answer this question:</h3>

{% endif %}

    <form action="/submit-answer/{{ question['id'] }}" method="post">

        <label for="details">Your answer:</label><br>
        <textarea id="details" name="body" minlength="10" required></textarea><br>

        <label for="image">Image URL:</label><br>
        <input id="image" type="text" name="image_url" min placeholder="e.g. http://www.images.com/cutekitten.jpg"><br>

        <input type="submit">

    </form>

{% endblock %}
